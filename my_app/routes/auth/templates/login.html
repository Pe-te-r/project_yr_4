{% extends "base.html" %}

{% block title %}Login - SHA Kenya{% endblock %}

{% block content %}
<!-- NAVBAR -->
<nav class="navbar navbar-expand-md pe-5 fixed-top navbar-dark bg-success">
  <a href="#" class="navbar-brand"><img src="{{ url_for('static', filename='images/sha_logo.svg') }}" alt="" style="height: 40px;"></a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
            <button class="btn btn-success btn-sm"><a class="nav-link" href="{{ url_for('home.home') }}">Home</a></button>
        </li>
        <li class="nav-item">
          <button class="btn btn-success btn-sm"><a class="nav-link" href="#">FAQs</a></button>  
        </li>
        <li class="nav-item">
          <button class="btn btn-success btn-sm"><a class="nav-link" href="#">Resources</a></button>   
        </li>
        <li class="nav-item">
              <button class="btn btn-success btn-sm"><a class="nav-link" href="#">eContracting</a></button>
        </li>
        <li class="nav-item">
          <button class="btn btn-success btn-sm"><a class="nav-link" href="{{ url_for('auth.register') }}">Register</a></button>
        </li>
        <li class="nav-item">
          <button class="btn btn-success btn-sm"><a class="nav-link" href="{{ url_for('auth.logout') }}">Logout</a></button>
        </li>
      </ul>
  </div>
</nav>

<!-- LOGIN FORM -->
<div class="container-fluid pt-4 mt-5">
  <div class="container text-end">
    <div class="col"><a href="#"><img src="{{ url_for('static', filename='images/afya-removebg-preview.png') }}" alt="" style="height: 40px;"></a></div> 
  </div>
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-6 p-5 rounded shadow">
        <h3 class="text-center"><strong>Login to Your Account</strong></h3>
        <h6 class="text-muted text-center">Enter your details below to authenticate</h6>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <!-- Form -->
        <form method="POST" action="{{ url_for('auth.login') }}" novalidate>
          {{ form.hidden_tag() }}

          <!-- ID Type -->
          <div class="form-group mt-3">
            {{ form.id_type.label(class="form-label") }}
            {{ form.id_type(class="form-control") }}
            {% for error in form.id_type.errors %}
              <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
          </div>

          <!-- ID Number -->
          <div class="form-group mt-3">
            {{ form.id_number.label(class="form-label") }}
            {{ form.id_number(class="form-control") }}
            {% for error in form.id_number.errors %}
              <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
          </div>

          <!-- OTP Fields -->
          <div class="form-group mt-3">
            <label class="form-label">Enter OTP Code</label>
            <div class="d-flex gap-2">
              {{ form.otp1(class="form-control text-center", style="width: 50px;") }}
              {{ form.otp2(class="form-control text-center", style="width: 50px;") }}
              {{ form.otp3(class="form-control text-center", style="width: 50px;") }}
              {{ form.otp4(class="form-control text-center", style="width: 50px;") }}
            </div>
            {% for field in [form.otp1, form.otp2, form.otp3, form.otp4] %}
              {% for error in field.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            {% endfor %}
          </div>

          <!-- Password -->
          <div class="form-group mt-3">
            {{ form.password.label(class="form-label") }}
            {{ form.password(class="form-control") }}
            {% for error in form.password.errors %}
              <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
          </div>

          <div class="d-grid">
            {{ form.submit(class="btn btn-primary btn-block py-2 px-5 mt-4") }}
          </div>
        </form>

        <p class="mt-3">Don't have an account? <a href="{{ url_for('auth.register') }}" class="text-info">Register</a></p>
      </div>
    </div>
  </div>
</div>
{% endblock %}

